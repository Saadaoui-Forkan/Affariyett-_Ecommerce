{"ast":null,"code":"import _slicedToArray from\"C:/Users/saadaoui/Desktop/affariyett/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import ProductList from'./ProductList';import ProductSidebar from'./ProductSidebar';import{useSelector,useDispatch}from\"react-redux\";import{fetchProducts}from\"../../redux/apiCalls/productApiCall\";import'./products.css';import Pagination from'./Pagination';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductsPage(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.product;}),products=_useSelector.products;useEffect(function(){dispatch(fetchProducts());},[dispatch]);// Filter by Category (Laptop or Mobile)\nvar _useState=useState('all'),_useState2=_slicedToArray(_useState,2),filterItem=_useState2[0],setFilterItem=_useState2[1];var filterProduct=products.filter(function(item){return filterItem==='laptop'?item.isLaptop===true:filterItem==='mobile'?item.isLaptop===false:item;});// Sort Products By Price\nvar _useState3=useState('noSort'),_useState4=_slicedToArray(_useState3,2),sortItem=_useState4[0],setSortItem=_useState4[1];var sortedProducts=sortItem===\"low\"?filterProduct.sort(function(a,b){return a.price-b.price;}):sortItem===\"hight\"?filterProduct.sort(function(a,b){return b.price-a.price;}):filterProduct.sort(function(a,b){return a.title>b.title?1:-1;});// Pagination\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var productPerPage=3;var pages=Math.ceil(sortedProducts.length/productPerPage);var startIndex=(currentPage-1)*productPerPage;var finalIndex=currentPage*productPerPage;var orderedProducts=sortedProducts.slice(startIndex,finalIndex);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"products\",children:[/*#__PURE__*/_jsx(ProductSidebar,{filterItem:filterItem,setFilterItem:setFilterItem,sortItem:sortItem,setSortItem:setSortItem}),/*#__PURE__*/_jsx(ProductList,{products:orderedProducts})]}),/*#__PURE__*/_jsx(Pagination,{pages:pages,currentPage:currentPage,setCurrentPage:setCurrentPage})]});}export default ProductsPage;","map":{"version":3,"names":["React","useEffect","useState","ProductList","ProductSidebar","useSelector","useDispatch","fetchProducts","Pagination","ProductsPage","dispatch","state","product","products","filterItem","setFilterItem","filterProduct","filter","item","isLaptop","sortItem","setSortItem","sortedProducts","sort","a","b","price","title","currentPage","setCurrentPage","productPerPage","pages","Math","ceil","length","startIndex","finalIndex","orderedProducts","slice"],"sources":["C:/Users/saadaoui/Desktop/affariyett/src/pages/products/ProductsPage.jsx"],"sourcesContent":["import React,{useEffect, useState} from 'react'\r\nimport ProductList from './ProductList'\r\nimport ProductSidebar from './ProductSidebar'\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchProducts } from \"../../redux/apiCalls/productApiCall\";\r\nimport './products.css'\r\nimport Pagination from './Pagination';\r\n\r\nfunction ProductsPage() {\r\n  const dispatch = useDispatch();\r\n  const { products } = useSelector((state) => state.product);\r\n  useEffect(() => {\r\n    dispatch(fetchProducts());\r\n  }, [dispatch])\r\n  // Filter by Category (Laptop or Mobile)\r\n  const [filterItem, setFilterItem] = useState('all')\r\n  const filterProduct = products.filter(item => (\r\n    filterItem === 'laptop' \r\n    ? item.isLaptop === true \r\n    : filterItem === 'mobile' \r\n    ? item.isLaptop === false\r\n    : item\r\n  ))\r\n  // Sort Products By Price\r\n  const [sortItem, setSortItem] = useState('noSort')\r\n  const sortedProducts = \r\n    sortItem === \"low\" ? filterProduct.sort((a,b) => a.price - b.price)\r\n    : sortItem === \"hight\" ? filterProduct.sort((a, b) => b.price - a.price)\r\n    : filterProduct.sort((a,b) => a.title > b.title ? 1 : -1) \r\n\r\n  // Pagination\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const productPerPage = 3;\r\n  const pages = Math.ceil(sortedProducts.length/productPerPage);\r\n  const startIndex = (currentPage - 1) * productPerPage;\r\n  const finalIndex = currentPage * productPerPage\r\n  const orderedProducts = sortedProducts.slice(startIndex,finalIndex)\r\n  \r\n  return (\r\n    <>\r\n      <div className='products'>\r\n        <ProductSidebar\r\n          filterItem = {filterItem}\r\n          setFilterItem = {setFilterItem}\r\n          sortItem = {sortItem}\r\n          setSortItem = {setSortItem}\r\n        />\r\n        <ProductList\r\n          products = {orderedProducts}\r\n        />\r\n      </div>\r\n      <Pagination\r\n        pages = {pages}\r\n        currentPage = {currentPage}\r\n        setCurrentPage = {setCurrentPage}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductsPage\r\n"],"mappings":"0HAAA,MAAOA,MAAK,EAAEC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAC/C,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,eAAc,KAAM,kBAAkB,CAC7C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,aAAa,KAAQ,qCAAqC,CACnE,MAAO,gBAAgB,CACvB,MAAOC,WAAU,KAAM,cAAc,CAAC,6IAEtC,QAASC,aAAY,EAAG,CACtB,GAAMC,SAAQ,CAAGJ,WAAW,EAAE,CAC9B,iBAAqBD,WAAW,CAAC,SAACM,KAAK,QAAKA,MAAK,CAACC,OAAO,GAAC,CAAlDC,QAAQ,cAARA,QAAQ,CAChBZ,SAAS,CAAC,UAAM,CACdS,QAAQ,CAACH,aAAa,EAAE,CAAC,CAC3B,CAAC,CAAE,CAACG,QAAQ,CAAC,CAAC,CACd;AACA,cAAoCR,QAAQ,CAAC,KAAK,CAAC,wCAA5CY,UAAU,eAAEC,aAAa,eAChC,GAAMC,cAAa,CAAGH,QAAQ,CAACI,MAAM,CAAC,SAAAC,IAAI,QACxCJ,WAAU,GAAK,QAAQ,CACrBI,IAAI,CAACC,QAAQ,GAAK,IAAI,CACtBL,UAAU,GAAK,QAAQ,CACvBI,IAAI,CAACC,QAAQ,GAAK,KAAK,CACvBD,IAAI,EACP,CAAC,CACF;AACA,eAAgChB,QAAQ,CAAC,QAAQ,CAAC,yCAA3CkB,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,eAAc,CAClBF,QAAQ,GAAK,KAAK,CAAGJ,aAAa,CAACO,IAAI,CAAC,SAACC,CAAC,CAACC,CAAC,QAAKD,EAAC,CAACE,KAAK,CAAGD,CAAC,CAACC,KAAK,GAAC,CACjEN,QAAQ,GAAK,OAAO,CAAGJ,aAAa,CAACO,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,QAAKA,EAAC,CAACC,KAAK,CAAGF,CAAC,CAACE,KAAK,GAAC,CACtEV,aAAa,CAACO,IAAI,CAAC,SAACC,CAAC,CAACC,CAAC,QAAKD,EAAC,CAACG,KAAK,CAAGF,CAAC,CAACE,KAAK,CAAG,CAAC,CAAG,CAAC,CAAC,GAAC,CAE3D;AACA,eAAsCzB,QAAQ,CAAC,CAAC,CAAC,yCAA1C0B,WAAW,eAAEC,cAAc,eAClC,GAAMC,eAAc,CAAG,CAAC,CACxB,GAAMC,MAAK,CAAGC,IAAI,CAACC,IAAI,CAACX,cAAc,CAACY,MAAM,CAACJ,cAAc,CAAC,CAC7D,GAAMK,WAAU,CAAG,CAACP,WAAW,CAAG,CAAC,EAAIE,cAAc,CACrD,GAAMM,WAAU,CAAGR,WAAW,CAAGE,cAAc,CAC/C,GAAMO,gBAAe,CAAGf,cAAc,CAACgB,KAAK,CAACH,UAAU,CAACC,UAAU,CAAC,CAEnE,mBACE,wCACE,aAAK,SAAS,CAAC,UAAU,wBACvB,KAAC,cAAc,EACb,UAAU,CAAItB,UAAW,CACzB,aAAa,CAAIC,aAAc,CAC/B,QAAQ,CAAIK,QAAS,CACrB,WAAW,CAAIC,WAAY,EAC3B,cACF,KAAC,WAAW,EACV,QAAQ,CAAIgB,eAAgB,EAC5B,GACE,cACN,KAAC,UAAU,EACT,KAAK,CAAIN,KAAM,CACf,WAAW,CAAIH,WAAY,CAC3B,cAAc,CAAIC,cAAe,EACjC,GACD,CAEP,CAEA,cAAepB,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}